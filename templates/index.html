<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Биржа недвижимости Lara</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Биржа недвижимости Lara</h1>
            <p class="subtitle">Профессиональная оценка квартир в Кишинёве</p>
        </header>

        <main class="main-content">
            <form method="POST" action="/" class="evaluation-form">
                <div class="form-section">
                    <h2>Параметры квартиры</h2>
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="district">Район:</label>
                            <select name="district" id="district" required>
                                <option value="">Выберите район</option>
                                <option value="Centru">Centru</option>
                                <option value="Telecentru">Telecentru</option>
                                <option value="Ciocana">Ciocana</option>
                                <option value="Buiucani">Buiucani</option>
                                <option value="Posta Veche">Posta Veche</option>
                                <option value="Durlești">Durlești</option>
                                <option value="Botanica">Botanica</option>
                                <option value="Sculeni">Sculeni</option>
                                <option value="Râșcani">Râșcani</option>
                                <option value="Aeroport">Aeroport</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="rooms">Количество комнат:</label>
                            <select name="rooms" id="rooms" required>
                                <option value="1">1</option>
                                <option value="2">2</option>
                                <option value="3">3</option>
                                <option value="4">4</option>
                                <option value="5">5+</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="area">Площадь (м²):</label>
                            <input type="number" name="area" id="area" min="15" max="500" step="0.1" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="repair">Состояние ремонта:</label>
                            <select name="repair" id="repair" required>
                                <option value="">Выберите состояние</option>
                                <option value="Variantă sură">Variantă sură</option>
                                <option value="Variantă albă">Variantă albă</option>
                                <option value="Reparație cosmetică">Reparație cosmetică</option>
                                <option value="Euroreparație">Euroreparație</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="building">Тип здания:</label>
                            <select name="building" id="building" required>
                                <option value="">Выберите тип</option>
                                <option value="Monolit">Monolit</option>
                                <option value="Cărămidă">Cărămidă</option>
                                <option value="Beton">Beton</option>
                                <option value="Cotileț">Cotileț</option>
                                <option value="Beton celular">Beton celular</option>
                                <option value="Combinat">Combinat</option>
                                <option value="Bloc">Bloc</option>
                                <option value="Panou">Panou</option>
                                <option value="Lemn">Lemn</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="floor">Этаж:</label>
                            <input type="number" name="floor" id="floor" min="1" max="25" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="total_floors">Этажность дома:</label>
                            <input type="number" name="total_floors" id="total_floors" min="1" max="25" required>
                        </div>
                    </div>
                </div>

                <button type="submit" class="calculate-btn">Рассчитать стоимость</button>
            </form>

            {% if result %}
            <div class="result-section">
                <h2>Результат оценки</h2>
                <div class="result-main">
                    <div class="total-price">
                        <span class="price-label">Итоговая стоимость:</span>
                        <span class="price-value">{{ result.total_price }} €</span>
                    </div>
                    <div class="price-per-m2">
                        <span>Цена за м²: {{ result.price_per_m2 }} €</span>
                    </div>
                </div>
                
                <div class="result-details">
                    <h3>Детали расчёта:</h3>
                    <div class="details-grid">
                        <div class="detail-item">
                            <span class="detail-label">Район:</span>
                            <span class="detail-value">{{ result.district }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Комнат:</span>
                            <span class="detail-value">{{ result.rooms }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Площадь:</span>
                            <span class="detail-value">{{ result.area }} м²</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Ремонт:</span>
                            <span class="detail-value">{{ result.repair }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Здание:</span>
                            <span class="detail-value">{{ result.building }}</span>
                        </div>
                        <div class="detail-item">
                            <span class="detail-label">Этаж:</span>
                            <span class="detail-value">{{ result.floor }} из {{ result.total_floors }}</span>
                        </div>
                    </div>
                    
                    <div class="coefficients">
                        <h4>Применённые коэффициенты:</h4>
                        <ul>
                            <li>Базовая цена ({{ result.district }}): {{ result.base_price }} €/м²</li>
                            <li>Коэффициент ремонта: {{ result.repair_coeff }}</li>
                            <li>Коэффициент здания: {{ result.building_coeff }}</li>
                            <li>Коэффициент комнат: {{ result.rooms_coeff }}</li>
                            <li>Коэффициент этажа: {{ result.floor_coeff }}</li>
                        </ul>
                    </div>
                </div>
            </div>
            {% endif %}
        </main>
    </div>
</body>
</html>
