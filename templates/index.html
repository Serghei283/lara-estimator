<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Биржа недвижимости Lara</title>
</head>
<body>
    <h1>Биржа недвижимости Lara</h1>
    <h2>Онлайн-калькулятор оценки</h2>

    <form method="POST" action="/">
        <label>Что оцениваем:</label>
        <select name="category" id="category" onchange="showForm()" required>
            <option value="">Выберите</option>
            <option value="apartment">Квартира</option>
            <option value="land">Земля</option>
            <option value="commercial">Нежилая недвижимость</option>
        </select>

        <!-- Квартира -->
        <div id="apartment-form" style="display:none;">
            <label>Район:</label>
            <select name="district">
                <option value="Centru">Centru</option>
                <option value="Botanica">Botanica</option>
                <option value="Ciocana">Ciocana</option>
            </select>
            <label>Площадь (м²):</label>
            <input type="number" name="area" min="10">
        </div>

        <!-- Земля -->
        <div id="land-form" style="display:none;">
            <label>Район:</label>
            <select name="land_district">
                <option value="Centru">Centru</option>
                <option value="Botanica">Botanica</option>
                <option value="Ciocana">Ciocana</option>
            </select>
            <label>Площадь участка (сотки):</label>
            <input type="number" name="land_area" min="1">
        </div>

        <!-- Коммерческая недвижимость -->
        <div id="commercial-form" style="display:none;">
            <label>Район:</label>
            <select name="district_com">
                <option value="Centru">Centru</option>
                <option value="Botanica">Botanica</option>
                <option value="Ciocana">Ciocana</option>
            </select>
            <label>Тип объекта:</label>
            <select name="object_type">
                <option value="office">Офис</option>
                <option value="store">Магазин</option>
                <option value="restaurant">Ресторан</option>
                <option value="warehouse">Склад</option>
                <option value="production">Производство</option>
            </select>
            <label>Площадь (м²):</label>
            <input type="number" name="object_area" min="10">
        </div>

        <button type="submit">Рассчитать</button>
    </form>

    <hr>

    {% if result %}
        <h2>Результат</h2>

        {% if result.category == "apartment" %}
            <p>Квартира в {{ result.district }}.  
            Площадь: {{ result.area }} м².  
            Цена за м²: {{ result.price_per_m2 }} €.  
            Итог: {{ result.total_price }} €</p>

        {% elif result.category == "land" %}
            <p>Земля в {{ result.district }}.  
            {{ result.land_area }} соток × {{ result.price_per_sotka }} € = {{ result.total_price }} €</p>

        {% elif result.category == "commercial" %}
            <p>{{ result.object_type }} в {{ result.district }}.  
            {{ result.object_area }} м² × {{ result.price_per_m2 }} €/м² = {{ result.total_price }} €</p>

        {% endif %}
    {% endif %}

<script>
function showForm() {
    document.getElementById("apartment-form").style.display = "none";
    document.getElementById("land-form").style.display = "none";
    document.getElementById("commercial-form").style.display = "none";

    let category = document.getElementById("category").value;
    if (category === "apartment") {
        document.getElementById("apartment-form").style.display = "block";
    } else if (category === "land") {
        document.getElementById("land-form").style.display = "block";
    } else if (category === "commercial") {
        document.getElementById("commercial-form").style.display = "block";
    }
}
</script>

</body>
</html>
