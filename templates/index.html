<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>Агентство недвижимости Lara - Предварительная оценка</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <header>
        <h1>Агентство недвижимости Lara</h1>
        <h2>Предварительная оценка</h2>
    </header>

    <main>
        <form method="POST">
            <div class="form-group">
                <label>Что оцениваем:</label>
                <select name="category" id="category" onchange="showForm()" required>
                    <option value="">— Выберите тип объекта —</option>
                    <option value="apartment">Квартира</option>
                    <option value="land">Земельный участок</option>
                    <option value="commercial">Нежилая недвижимость</option>
                </select>
            </div>

            <!-- Квартира -->
            <div id="apartment-form" class="form-section" style="display:none;">
                <div class="form-group">
                    <label>Район:</label>
                    <select name="district">
                        <option>Centru</option><option>Telecentru</option>
                        <option>Ciocana</option><option>Buiucani</option>
                        <option>Posta Veche</option><option>Durlești</option>
                        <option>Botanica</option><option>Sculeni</option>
                        <option>Râșcani</option><option>Aeroport</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Комнат:</label>
                    <input type="number" name="rooms" min="1" max="10">
                </div>

                <div class="form-group">
                    <label>Этаж:</label>
                    <input type="number" name="floor" min="1" max="50">
                </div>

                <div class="form-group">
                    <label>Этажность:</label>
                    <input type="number" name="floors_total" min="1" max="50">
                </div>

                <div class="form-group">
                    <label>Площадь (м²):</label>
                    <input type="number" step="0.1" name="area" min="10" max="500">
                </div>

                <div class="form-group">
                    <label>Состояние:</label>
                    <select name="repair">
                        <option>Variantă sură</option>
                        <option>Variantă albă</option>
                        <option>Reparație cosmetică</option>
                        <option>Euroreparație</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Тип здания:</label>
                    <select name="building">
                        <option>Beton</option><option>Beton celular</option>
                        <option>Bloc</option><option>Combinat</option>
                        <option>Cotileț</option><option>Cărămidă</option>
                        <option>Lemn</option><option>Monolit</option>
                        <option>Panou</option>
                    </select>
                </div>
            </div>

            <!-- Земельный участок -->
            <div id="land-form" class="form-section" style="display:none;">
                <div class="form-group">
                    <label>Тип участка:</label>
                    <select name="land_type">
                        <option value="intracity">В населенном пункте</option>
                        <option value="agro">Сельхозназначения</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Площадь (сотки):</label>
                    <input type="number" step="0.1" name="land_area" min="0.1" max="1000">
                </div>
            </div>

            <!-- Нежилое -->
            <div id="commercial-form" class="form-section" style="display:none;">
                <div class="form-group">
                    <label>Тип объекта:</label>
                    <select name="object_type">
                        <option value="office">Офис</option>
                        <option value="store">Магазин</option>
                        <option value="restaurant">Ресторан</option>
                        <option value="warehouse">Склад</option>
                        <option value="production">Производственное помещение</option>
                    </select>
                </div>

                <div class="form-group">
                    <label>Площадь (м²):</label>
                    <input type="number" step="0.1" name="object_area" min="10" max="10000">
                </div>
            </div>

            <button type="submit" class="calculate-btn">Рассчитать стоимость</button>
        </form>

        <section class="result">
            {% if result %}
                <h3>✅ Результат оценки</h3>
                <div class="price-display">
                    <p><strong>Итоговая стоимость: {{ result.total_price }} €</strong></p>
                </div>

                {% if result.category == "apartment" %}
                <h4>Детали квартиры:</h4>
                <ul>
                    <li><strong>Район:</strong> {{ result.district }}</li>
                    <li><strong>Комнат:</strong> {{ result.rooms }}</li>
                    <li><strong>Этаж:</strong> {{ result.floor }} из {{ result.floors_total }}</li>
                    <li><strong>Состояние:</strong> {{ result.repair }}</li>
                    <li><strong>Тип здания:</strong> {{ result.building }}</li>
                    <li><strong>Площадь:</strong> {{ result.area }} м²</li>
                    <li><strong>Цена за м²:</strong> {{ result.price_per_m2 }} €</li>
                </ul>

                {% elif result.category == "land" %}
                <h4>Детали участка:</h4>
                <ul>
                    <li><strong>Площадь:</strong> {{ result.land_area }} соток</li>
                    <li><strong>Цена за сотку:</strong> {{ result.price_per_sotka }} €</li>
                </ul>

                {% elif result.category == "commercial" %}
                <h4>Детали объекта:</h4>
                <ul>
                    <li><strong>Площадь:</strong> {{ result.object_area }} м²</li>
                    <li><strong>Цена за м²:</strong> {{ result.price_per_m2 }} €</li>
                </ul>
                {% endif %}

            {% else %}
                <p style="color: #666;">⚠️ Выберите тип объекта, заполните данные и нажмите «Рассчитать стоимость»</p>
            {% endif %}
        </section>
    </main>

    <script>
        function showForm() {
            let category = document.getElementById("category").value;
            
            // Скрываем все формы
            document.getElementById("apartment-form").style.display = "none";
            document.getElementById("land-form").style.display = "none";
            document.getElementById("commercial-form").style.display = "none";
            
            // Показываем нужную форму
            if (category === "apartment") {
                document.getElementById("apartment-form").style.display = "block";
            } else if (category === "land") {
                document.getElementById("land-form").style.display = "block";
            } else if (category === "commercial") {
                document.getElementById("commercial-form").style.display = "block";
            }
        }
    </script>
</body>
</html>
